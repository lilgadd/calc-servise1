# üìä –ü—Ä–æ–µ–∫—Ç: –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä HTTP API

#### –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä, —Ä–∞–±–æ—Ç–∞—é—â–∏–π —á–µ—Ä–µ–∑ HTTP-—Å–µ—Ä–≤–∏—Å! –≠—Ç–æ—Ç —Å–µ—Ä–≤–µ—Ä –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –≤ –≤–∏–¥–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç. üßÆ

---
#### –°–µ—Ä–≤–∏—Å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç POST-–∑–∞–ø—Ä–æ—Å—ã —Å –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏–º–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è–º–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON, –≤—ã—á–∏—Å–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –µ–≥–æ –≤ –≤–∏–¥–µ –æ—Ç–≤–µ—Ç–∞. –°–µ—Ä–≤–∏—Å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:
* ##### –°–ª–æ–∂–µ–Ω–∏–µ (+)
* ##### –í—ã—á–∏—Ç–∞–Ω–∏–µ (-)
* ##### –£–º–Ω–æ–∂–µ–Ω–∏–µ (*)
* ##### –î–µ–ª–µ–Ω–∏–µ (/)
###### –¢–∞–∫–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –≤—ã—Ä–∞–∂–µ–Ω–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–∫–æ–±–æ–∫, –Ω–∞–ø—Ä–∏–º–µ—Ä: 
```
(2 + 3) * 4.
```

### üöÄ –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

1. ##### –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Go (–≤–µ—Ä—Å–∏–∏ 1.18 –∏–ª–∏ –Ω–æ–≤–µ–µ).  
2. ##### –°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç:  
    ```
    git clone https://github.com/lilgadd/calc.go
    ```
3. ##### –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –∫–æ—Ä–Ω–µ–≤—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞:
    ```
    cd calc.go
    ```
4. ##### –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:
    ``` 
    go run cmd/main.go
    ```
    ###### –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:
    ```
    http://localhost:8080
    ```
---
### üåê Endpoint API
    POST /api/v1/calculate
##### –≠—Ç–æ—Ç endpoint –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç.
---

### üì• –í–≤–æ–¥:
##### JSON-–æ–±—ä–µ–∫—Ç —Å –ø–æ–ª–µ–º expression –∏ —Å—Ç–∞—Ç—É—Å:
* ##### –ï—Å–ª–∏ –æ—à–∏–±–æ–∫ –Ω–µ –≤–æ–∑–Ω–∏–∫–ª–æ
    * ###### 200 (OK)
* ##### –ï—Å–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ):
    * ###### 422 - –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, –∫—Ä–æ–º–µ —Ü–∏—Ñ—Ä –∏ —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤—ë–ª —Å–∏–º–≤–æ–ª –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ –∞–ª—Ñ–∞–≤–∏—Ç–∞
    * ###### 500 - —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫
#### ‚ùì–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤
* ###### –£—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å
```
curl -X POST http://localhost:8080/api/v1/calculate
-H "Content-Type: application/json"
-d '{"expression": "2 * (3 + 4)"}'
```
###### –í—ã–≤–æ–¥
```
{
"result": "14.000000"
}
```
* ###### –û—à–∏–±–∫–∞ 422
```
curl --location 'http://localhost:8080/api/v1/calculate' \
--header 'Content-Type: application/json' \
--data '{"expression": "3 + a * 5"}'
```
###### –í—ã–≤–æ–¥
```
{
"error":"Expression is not valid"
}
```
* ###### –û—à–∏–±–∫–∞ 500
```
curl --location 'http://localhost:8080/api/v1/calculate' \
--header 'Content-Type: application/json' \
--data '{"expression": "5 / 0"}'
```
###### –í—ã–≤–æ–¥
```
{
"error":"Division by zero is not allowed"
}
```
---
### üîé–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
```
go test ./...
```
---
### üìö–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
- rpn
  - pkg
    - rpn
        - rpn.go           #–õ–æ–≥–∏–∫–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
        - rpn_test.go     # –¢–µ—Å—Ç—ã –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
  - internal
    - application
        - application.go  # –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤
  - cmd
    - main.go             # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```